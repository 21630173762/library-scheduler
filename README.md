# 图书馆排班系统

这是一个用于高校图书馆学生助理排班的系统，可以根据学生课表和班次需求自动生成排班表。

## 主要功能

- 根据学生课表和班次需求自动生成排班表
- 支持前台班和书库班两种排班类型
- 考虑公平性和连续性原则进行排班
- 提供网页版和GUI版学生课表生成工具

## 文件说明

- `library_scheduler.py`: 排班系统主程序
- `student_schedule.html`: 学生课表生成网页版
- `前台班班次.txt`: 前台班班次数据（JSON格式）
- `书库班班次.txt`: 书库班班次数据（JSON格式）
- `上课时间.txt`: 上课时间数据（JSON格式）
- `student.txt`: 学生信息数据（JSON格式）
- `class/`: 存放学生课表数据的文件夹

## 使用方法

1. 让学生使用`student_schedule.html`生成个人课表，保存到`class/`文件夹
2. 编辑`student.txt`添加学生信息
3. 运行`library_scheduler.py`生成排班表
4. 查看生成的Excel排班表 

## 详细使用说明

### 配置文件格式

- `前台班班次.txt`: 前台班次配置，JSON格式，示例：
  ```json
  [
    {"班次": "周一（12:00-13:00）", "需求人数": 1},
    {"班次": "周一（13:00-14:00）", "需求人数": 1}
  ]
  ```
  其中"班次"格式必须为"周X（HH:MM-HH:MM）"，需求人数表示每个班次需要的学生数量

- `书库班班次.txt`: 书库班次配置，JSON格式，示例：
  ```json
  [
    {"班次": "周一(8:30-9:30)", "需求人数": 2},
    {"班次": "周一(14:00-15:00)", "需求人数": 1}
  ]
  ```
  格式与前台班相同，但注意括号可以是英文的()或中文的（）

- `student.txt`: 学生信息列表，JSON格式，示例：
  ```json
  [
    {
      "name": "张三",
      "student_id": "20230001"
    }
  ]
  ```
  必须包含name和student_id两个字段

- `上课时间.txt`: 学校课程时间信息，用于学生课表生成工具，JSON格式
  ```json
  {
    "第一大节": [
      {"节次": 1, "时间": "8:30-9:20"},
      {"课间": "5分钟"},
      {"节次": 2, "时间": "9:25-10:15"}
    ]
  }
  ```

### 学生课表生成

- `student_schedule.html`: 网页版课表生成工具
  1. 在浏览器中打开此文件
  2. 填写姓名和学号
  3. 点击有课时间格子将其标记为红色
  4. 点击"导出课表JSON"按钮保存
  5. 将生成的JSON文件保存到`class/`文件夹，文件名为学号.json

- `student_class_gui.py`: GUI版课表生成工具
  1. 运行`python student_class_gui.py`启动程序 
  2. 填写姓名和学号
  3. 点击有课时间格子将其标记为红色
  4. 点击"导出课表JSON"按钮选择保存位置
  5. 将生成的JSON文件保存到`class/`文件夹，文件名为学号.json

### 排班系统运行

- `library_scheduler.py`: 主排班程序
  1. 编辑文件，修改以下参数：
     ```python
     year = 2025  # 排班年份
     month = 5    # 排班月份
     ```
  2. 确保所有学生课表已保存到`class/`文件夹
  3. 运行`python library_scheduler.py`
  4. 程序会在当前目录生成`{month}月排班表.xlsx`文件

排班系统会考虑以下因素：
- 学生课表冲突情况
- 公平分配原则（优先分配给排班少的学生）
- 班次连续性（同一班次尽量安排同一学生）
- 前台班和书库班分开排班 